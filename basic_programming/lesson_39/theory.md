### Lesson 39

Функциональные интерфейсы — это важная концепция в программировании на языке Java, особенно начиная с версии Java 8, где они были представлены для поддержки функционального программирования и лямбда-выражений. Они представляют собой интерфейсы с единственным абстрактным методом, что позволяет использовать их в качестве целевых типов для лямбда-выражений и ссылок на методы.

### Основные аспекты функциональных интерфейсов:

1. **Единый абстрактный метод**:
    - Функциональный интерфейс должен содержать ровно один абстрактный метод. Он может также содержать статические и default методы с реализацией.

2. **Аннотация @FunctionalInterface**:
    - Эта аннотация используется для явного указания, что интерфейс является функциональным. Это не обязательно, но рекомендуется, так как она позволяет компилятору проверять соблюдение правил функционального интерфейса.
   ```java
   @FunctionalInterface
   public interface MyFunctionalInterface {
       void execute();
   }
   ```

3. **Лямбда-выражения**:
    - Лямбда-выражения предоставляют лаконичный способ создания экземпляров функциональных интерфейсов. Лямбда-выражения имеют синтаксис `(parameters) -> expression` или `(parameters) -> { statements; }`.
   ```java
   MyFunctionalInterface myFunc = () -> System.out.println("Hello, Functional Interface!");
   myFunc.execute();
   ```

Функциональные интерфейсы значительно упрощают разработку, делая код более лаконичным и читаемым, особенно в сочетании с лямбда-выражениями и потоками (streams).


Лямбда-выражения (или лямбда-функции) - это способ представления анонимных функций в программировании. Лямбда-выражения позволяют вам создавать и передавать функции как аргументы другим функциям, а также использовать их в качестве выражений, что делает код более компактным и читаемым. Основная идея лямбда-выражений заключается в том, чтобы позволить определить функцию "на месте" без явного объявления имени для неё.

В Java лямбда-выражения были введены в версии 8 и связаны с использованием функциональных интерфейсов. Лямбда-выражение в Java имеет следующий синтаксис:

```java
(parameters) -> expression
```

где:
- `parameters` - параметры функции (если они есть). Если функция не принимает параметры, то они могут быть опущены, например, `() -> expression`.
- `expression` - тело функции, которое выполняется при вызове лямбда-выражения.

Примеры использования лямбда-выражений в Java:

```java
// Пример 1: Лямбда-выражение без параметров
Runnable runnable = () -> System.out.println("Hello, World!");
runnable.run();

// Пример 2: Лямбда-выражение с параметрами
BiFunction<Integer, Integer, Integer> add = (a, b) -> a + b;
int result = add.apply(5, 3); // result содержит 8

// Пример 3: Лямбда-выражение как аргумент функции
List<String> names = Arrays.asList("Alice", "Bob", "Charlie");
names.forEach(name -> System.out.println("Hello, " + name));
```


### Шаги выполнения лямбда-выражения 

1. **Определение функционального интерфейса**:
   ```java
   @FunctionalInterface
   interface MathOperation {
       int operate(int a, int b);
   }
   ```
    - Мы определяем интерфейс `MathOperation` с одним абстрактным методом `operate`.

2. **Использование лямбда-выражения**:
   ```java
   public class LambdaExample {
       public static void main(String[] args) {
           MathOperation addition = (a, b) -> a + b;
           int result = addition.operate(5, 3);
           System.out.println(result); // Output: 8
       }
   }
   ```
    - Внутри метода `main` мы создаем переменную `addition` типа `MathOperation` и присваиваем ей лямбда-выражение `(a, b) -> a + b`.

### Разбиение шагов 

#### Шаг 1: Создание функционального интерфейса
- Интерфейс `MathOperation` — это контракт, который гарантирует, что любой его имплементатор должен реализовать метод `operate`.

#### Шаг 2: Создание анонимного класса
Когда мы пишем:
```java
MathOperation addition = (a, b) -> a + b;
```
- Компилятор Java преобразует лямбда-выражение в нечто подобное анонимному классу. Анонимный класс — это класс без имени, который используется для создания объектов на месте.

#### Аналог анонимного класса
Вот как это могло бы выглядеть без лямбда-выражений, с использованием анонимного класса:
```java
MathOperation addition = new MathOperation() {
    @Override
    public int operate(int a, int b) {
        return a + b;
    }
};
```
- Здесь мы создаем новый объект типа `MathOperation` и одновременно предоставляем реализацию метода `operate`.

#### Шаг 3: Вызов метода `operate`
- Когда мы вызываем `addition.operate(5, 3)`, вызывается метод `operate` объекта анонимного класса (или лямбда-выражения), который возвращает сумму `5 + 3`.

Лямбда-выражения предоставляют компактный синтаксис для создания экземпляров функциональных интерфейсов, скрывая детали создания анонимных классов. 
Однако, по сути, они выполняют ту же работу — создают объект, реализующий метод интерфейса, и вызывают этот метод при необходимости. 
Лямбда-выражения позволяют писать более лаконичный и читабельный код.

